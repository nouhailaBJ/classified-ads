(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{241:function(t,a,e){"use strict";e.r(a);var s={data:function(){return{editmode:!0,users:{},locations:{},form:new Form({id:"",name:"",email:"",number:"",admin:"",avatar:"",password:"",location:"",password_confirmation:""})}},methods:{updateProfile:function(t){var a=this,e=t.target.files[0],s=new FileReader;if(e.size>2097152)return Swal.fire("Failed!","You are uploading a large file.","warning"),!1;s.onloadend=function(t){a.form.avatar=s.result},s.readAsDataURL(e)},getResults:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;axios.get("/api/user?page="+a).then((function(a){t.users=a.data}))},newModal:function(){this.editmode=!1,this.form.reset(),$("#addNew").modal("show")},editModal:function(t){this.editmode=!0,this.form.reset(),$("#addNew").modal("show"),this.form.fill(t)},loadUsers:function(){var t=this;axios.get("/api/user").then((function(a){var e=a.data;return t.users=e}))},createUser:function(){var t=this;this.$Progress.start(),this.form.post("/api/user").then((function(){Fire.$emit("AfterCreate"),$("#addNew").modal("hide"),$("#addNew").removeClass("in"),$(".modal-backdrop").remove(),$("body").removeClass("modal-open"),$("body").css("padding-right",""),$("#addNew").hide(),Toast.fire({icon:"success",title:"Successfully create new user"}),t.$Progress.finish()})).catch((function(){}))},deleteUser:function(t){var a=this;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.value&&a.form.delete("/api/user/"+t).then((function(){Fire.$emit("AfterCreate"),Swal.fire("Deleted!","Your file has been deleted.","success")})).catch((function(){Swal.fire("Failed!","Your file has been deleted.","warning")}))}))},loadLocation:function(){var t=this;axios.get("/api/location").then((function(a){var e=a.data;return t.locations=e}))},updateUser:function(){var t=this;this.$Progress.start(),this.form.put("/api/user/"+this.form.id).then((function(){$("#addNew").modal("hide"),Swal.fire("Updated!","Your information has been updated.","success"),t.$Progress.finish(),Fire.$emit("AfterCreate")})).catch((function(){t.$Progress.fail()}))}},created:function(){var t=this;Fire.$on("searching",(function(){var a=t.$parent.search;axios.get("/api/findUser?q="+a).then((function(a){t.users=a.data})).catch((function(){}))})),this.loadUsers(),this.loadLocation(),Fire.$on("AfterCreate",(function(){t.loadUsers()}))}},r=e(2),o=Object(r.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content-wrapper"},[t._m(0),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("h3",{staticClass:"card-title"},[t._v("Users Table")]),t._v(" "),e("div",{staticClass:"card-tools"},[e("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:t.newModal}},[e("i",{staticClass:"fas fa-plus"}),t._v(" Add New\n                ")]),t._v(" "),t._m(1)])]),t._v(" "),e("div",{staticClass:"card-body"},[e("table",{staticClass:"table table-bordered table-striped",attrs:{id:"example1"}},[t._m(2),t._v(" "),e("tbody",t._l(t.users.data,(function(a){return e("tr",{key:a.id},[e("td",[e("a",{attrs:{href:"/uploads/avatar/"+a.avatar,"data-toggle":"lightbox","data-title":a.name,"data-gallery":"gallery"}},[e("img",{staticClass:"img-size-64",attrs:{src:"/uploads/avatar/"+a.avatar,title:a.name}})])]),t._v(" "),e("td",[t._v(t._s(a.name))]),t._v(" "),e("td",[t._v(t._s(a.email))]),t._v(" "),e("td",[t._v(t._s(a.number))]),t._v(" "),e("td",[t._v(t._s(t._f("myDate")(a.created_at)))]),t._v(" "),e("td",[e("a",{staticClass:"btn btn-info white-text bg-info btn-sm",on:{click:function(e){return t.editModal(a)}}},[e("i",{staticClass:"fas fa-edit"}),t._v(" Edit\n                    ")]),t._v(" "),e("a",{staticClass:"btn btn-danger white-text bg-danger btn-sm",on:{click:function(e){return t.deleteUser(a.id)}}},[e("i",{staticClass:"fas fa-trash"}),t._v(" Delete\n                    ")])])])})),0)])]),t._v(" "),e("div",{staticClass:"card-footer"},[e("pagination",{attrs:{data:t.users},on:{"pagination-change-page":t.getResults}})],1)])])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"addNew"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h4",{directives:[{name:"show",rawName:"v-show",value:!t.editmode,expression:"!editmode"}],staticClass:"modal-title"},[e("i",{staticClass:"fas fa-plus"}),t._v(" Add New User")]),t._v(" "),e("h4",{directives:[{name:"show",rawName:"v-show",value:t.editmode,expression:"editmode"}],staticClass:"modal-title"},[e("i",{staticClass:"fas fa-edit"}),t._v("Update User")]),t._v(" "),t._m(3)]),t._v(" "),e("form",{on:{submit:function(a){a.preventDefault(),t.editmode?t.updateUser():t.createUser()}}},[e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Name")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("name")},attrs:{type:"text",name:"name"},domProps:{value:t.form.name},on:{input:function(a){a.target.composing||t.$set(t.form,"name",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"name"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",[t._v("Number")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.number,expression:"form.number"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("number")},attrs:{type:"text",name:"number"},domProps:{value:t.form.number},on:{input:function(a){a.target.composing||t.$set(t.form,"number",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"number"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",[t._v("Email address")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("email")},attrs:{type:"email",name:"email"},domProps:{value:t.form.email},on:{input:function(a){a.target.composing||t.$set(t.form,"email",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"email"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.admin,expression:"form.admin"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("admin")},attrs:{name:"admin",id:"admin"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"admin",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("Select User Role")]),t._v(" "),e("option",{attrs:{value:"1"}},[t._v("Admin")]),t._v(" "),e("option",{attrs:{value:"0"}},[t._v("Standard User")])]),t._v(" "),e("has-error",{attrs:{form:t.form,field:"type"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputProjectLeader"}},[t._v("Location")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.location,expression:"form.location"}],staticClass:"custom-select form-control",class:{"is-invalid":t.form.errors.has("location")},attrs:{name:"location",placeholder:"Select one"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"location",a.target.multiple?e:e[0])}}},[e("option",{attrs:{selected:"",disabled:""}},[t._v("Select one")]),t._v(" "),t._l(t.locations.data,(function(a){return e("option",{key:a.id,domProps:{value:a.name}},[t._v("\n                      "+t._s(a.name)+"\n                      ")])}))],2),t._v(" "),e("has-error",{attrs:{form:t.form,field:"location"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",[t._v("Password")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("password")},attrs:{type:"password",name:"password"},domProps:{value:t.form.password},on:{input:function(a){a.target.composing||t.$set(t.form,"password",a.target.value)}}}),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:t.editmode,expression:"editmode"}]},[t._v("Not required if you don't want change your password")]),t._v(" "),e("has-error",{attrs:{form:t.form,field:"password"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",[t._v("Confirmation Password")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password_confirmation,expression:"form.password_confirmation"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("password_confirmation")},attrs:{type:"password",name:"password_confirmation"},domProps:{value:t.form.password_confirmation},on:{input:function(a){a.target.composing||t.$set(t.form,"password_confirmation",a.target.value)}}}),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:t.editmode,expression:"editmode"}]},[t._v("Not required if you don't want change your password")]),t._v(" "),e("has-error",{attrs:{form:t.form,field:"password_confirmation"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",[t._v("Avatar")]),t._v(" "),e("input",{staticClass:"form-control",class:{"is-invalid":t.form.errors.has("avatar")},attrs:{type:"file",name:"avatar"},on:{change:t.updateProfile}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"avatar"}})],1)]),t._v(" "),e("div",{staticClass:"modal-footer justify-content-between"},[e("button",{staticClass:"btn  btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:t.editmode,expression:"editmode"}],staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("Update")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:!t.editmode,expression:"!editmode"}],staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Create")])])])])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"content-header"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm-6"},[a("h1",{staticClass:"m-0 text-dark"},[a("i",{staticClass:"fa fa-users",attrs:{"aria-hidden":"true"}}),this._v(" Users")])])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"btn btn-dark",attrs:{type:"button","data-card-widget":"collapse"}},[a("i",{staticClass:"fas fa-minus"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"bg-dark"},[e("tr",[e("th",[t._v("Avatar")]),t._v(" "),e("th",[t._v("Name")]),t._v(" "),e("th",[t._v("Email")]),t._v(" "),e("th",[t._v("Number")]),t._v(" "),e("th",[t._v("Added At ")]),t._v(" "),e("th",[t._v("Actions")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null);a.default=o.exports}}]);
//# sourceMappingURL=21.js.map