(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{242:function(t,a,e){"use strict";e.r(a);var s={data:function(){return{editmode:!0,categories:{},products:{},subcats:{},medias:{},attachments:[],locations:{},form2:new FormData,form:new Form({id:"",title:"",description:"",tags:"",status:"",price:"",cat_id:"",location:"",image:"",sub_id:""})}},methods:{changeSub:function(){Fire.$emit("AfterShow")},getResults:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;axios.get("/api/product?page="+a).then((function(a){t.products=a.data}))},deleteImage:function(t){Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(a){a.value&&axios.delete("/api/delete_image/"+t).then((function(){$("#images").modal("hide"),$("#images").removeClass("in"),$(".modal-backdrop").remove(),$("body").removeClass("modal-open"),$("body").css("padding-right",""),$("#images").hide(),Swal.fire("Deleted!","Your file has been deleted.","success")})).catch((function(){Swal.fire("Failed!","Your file has been deleted.","warning")}))}))},newModal2:function(t){this.form2.append("proid",t),this.attachments.length=0,this.form2.delete("pics[]"),$("#images").modal("show"),this.loadPicture(t)},fieldChange:function(t){var a=t.target.files;if(!a.length)return!1;for(var e=0;e<a.length;e++)this.attachments.push(a[e])},loadPicture:function(t){var a=this;axios.get("/api/pro_image/"+t).then((function(t){var e=t.data;return a.medias=e}))},showModal:function(t){this.loadPicture(t),$("#show"+t).modal("show")},uploadImage:function(t){var a=this,e=t.target.files[0],s=new FileReader;if(e.size>2097152)return Swal.fire("Failed!","You are uploading a large file.","warning"),!1;s.onloadend=function(t){a.form.image=s.result},s.readAsDataURL(e)},uploadFile:function(){for(var t=this,a=0;a<this.attachments.length;a++)this.form2.append("pics[]",this.attachments[a]);this.$Progress.start(),document.getElementById("upload-file").value=[],axios.post("/api/pro_image",this.form2).then((function(a){$("#images").modal("hide"),$("#images").removeClass("in"),$(".modal-backdrop").remove(),$("body").removeClass("modal-open"),$("body").css("padding-right",""),$("#images").hide(),Toast.fire({icon:"success",title:"Successfully added new Picture"}),t.$Progress.finish()})).catch((function(t){}))},newModal:function(){this.editmode=!1,this.form.reset(),$("#addNew").modal("show")},editModal:function(t){this.editmode=!0,this.form.reset(),$("#addNew").modal("show"),this.form.fill(t)},createProduct:function(){var t=this;this.$Progress.start(),this.form.post("/api/product").then((function(){Fire.$emit("AfterCreate"),$("#addNew").modal("hide"),$("#addNew").removeClass("in"),$(".modal-backdrop").remove(),$("body").removeClass("modal-open"),$("body").css("padding-right",""),$("#addNew").hide(),Toast.fire({icon:"success",title:"Successfully create new Product"}),t.$Progress.finish()})).catch((function(){}))},loadProducts:function(){var t=this;axios.get("/api/product").then((function(a){var e=a.data;return t.products=e}))},loadLocation:function(){var t=this;axios.get("/api/location").then((function(a){var e=a.data;return t.locations=e}))},loadCategory:function(){var t=this;axios.get("/api/cat_product").then((function(a){var e=a.data;return t.categories=e}))},loadSubCategory:function(){var t=this;""!=this.form.cat_id&&axios.get("/api/sub_cat/"+this.form.cat_id).then((function(a){var e=a.data;return t.subcats=e}))},deleteProduct:function(t){var a=this;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.value&&a.form.delete("/api/product/"+t).then((function(){Fire.$emit("AfterCreate"),Swal.fire("Deleted!","Your Product has been deleted.","success")})).catch((function(){Swal.fire("Failed!","Your Product has been not deleted.","warning")}))}))},updateProduct:function(){var t=this;this.$Progress.start(),this.form.put("/api/product/"+this.form.id).then((function(){$("#addNew").modal("hide"),Swal.fire("Updated!","Your information has been updated.","success"),t.$Progress.finish(),Fire.$emit("AfterCreate")})).catch((function(){t.$Progress.fail()}))}},created:function(){var t=this;Fire.$on("searching",(function(){var a=t.$parent.search;axios.get("/api/findProduct?q="+a).then((function(a){t.products=a.data})).catch((function(){}))})),this.loadProducts(),this.loadCategory(),this.loadLocation(),this.loadSubCategory(),Fire.$on("AfterCreate",(function(){t.loadProducts()})),Fire.$on("AfterShow",(function(){t.loadSubCategory()}))}},i=e(2),o=Object(i.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content-wrapper"},[t._m(0),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("h3",{staticClass:"card-title"},[t._v("Products Table")]),t._v(" "),e("div",{staticClass:"card-tools"},[e("button",{staticClass:"btn btn-dark",attrs:{type:"button","data-toggle":"modal","data-target":"#add-new"},on:{click:t.newModal}},[e("i",{staticClass:"fas fa-plus"}),t._v(" Add New\n                ")]),t._v(" "),t._m(1)])]),t._v(" "),e("div",{staticClass:"card-body"},[e("table",{staticClass:"table table-bordered table-striped",attrs:{id:"example1"}},[t._m(2),t._v(" "),e("tbody",t._l(t.products.data,(function(a){return e("tr",{key:a.id},[e("td",[e("a",{attrs:{href:"/uploads/product/"+a.image,"data-toggle":"lightbox","data-title":a.title,"data-gallery":"gallery"}},[e("img",{staticClass:"img-size-64",attrs:{src:"/uploads/product/"+a.image,alt:"Product Image"}})])]),t._v(" "),e("td",[t._v(t._s(a.title)+"\n                  ")]),t._v(" "),e("td",[t._v(t._s(a.price)+" $")]),t._v(" "),e("td",[e("span",{directives:[{name:"show",rawName:"v-show",value:a.status,expression:"product.status"}],staticClass:"badge badge-success"},[t._v("Enabled")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:!a.status,expression:"!product.status"}],staticClass:"badge badge-danger"},[t._v("Disabled")])]),t._v(" "),e("td",[t._v(" "+t._s(t._f("myDate")(a.created_at)))]),t._v(" "),e("td",[e("a",{staticClass:"btn btn-success white-text bg-success btn-sm",on:{click:function(e){return t.showModal(a.id)}}},[e("i",{staticClass:"fas fa-eye"})]),t._v(" "),e("a",{staticClass:"btn btn-primary white-text bg-primary btn-sm",on:{click:function(e){return t.newModal2(a.id)}}},[e("i",{staticClass:"fas fa-file-image"})]),t._v(" "),e("a",{staticClass:"btn btn-info white-text bg-info btn-sm",on:{click:function(e){return t.editModal(a)}}},[e("i",{staticClass:"fas fa-edit"})]),t._v(" "),e("a",{staticClass:"btn btn-danger white-text bg-danger btn-sm",on:{click:function(e){return t.deleteProduct(a.id)}}},[e("i",{staticClass:"fas fa-trash"})])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"show"+a.id}},[e("div",{staticClass:"modal-dialog modal-lg"},[e("div",{staticClass:"modal-content"},[t._m(3,!0),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("h3",{staticClass:"d-inline-block "},[t._v(t._s(a.title))])]),t._v(" "),e("div",{staticClass:"col-12 col-sm-6"},[e("div",{staticClass:"carousel slide",attrs:{id:"carouselExampleIndicators","data-ride":"carousel"}},[e("div",{staticClass:"carousel-inner"},[e("div",{staticClass:"carousel-item active"},[e("img",{staticClass:"d-block w-100",attrs:{src:"/uploads/product/"+a.image,alt:"First slide"}})]),t._v(" "),t._l(t.medias.data,(function(t){return e("div",{key:t.id,staticClass:"carousel-item"},[e("img",{staticClass:"d-block w-100",attrs:{src:"/uploads/product/"+t.image,alt:"Second slide"}})])}))],2),t._v(" "),t._m(4,!0),t._v(" "),t._m(5,!0)])]),t._v(" "),e("div",{staticClass:"col-12 col-sm-6"},[e("p",[t._v(t._s(a.description))]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"bg-gray py-2 px-3 mt-4"},[e("h2",{staticClass:"mb-0"},[t._v("\n                                    $ "+t._s(a.price)+"\n                                  ")])])])])]),t._v(" "),t._m(6,!0)])])])])})),0)])]),t._v(" "),e("div",{staticClass:"card-footer"},[e("pagination",{attrs:{data:t.products},on:{"pagination-change-page":t.getResults}})],1)])])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"addNew"}},[e("div",{staticClass:"modal-dialog  modal-lg"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h4",{directives:[{name:"show",rawName:"v-show",value:!t.editmode,expression:"!editmode"}],staticClass:"modal-title"},[e("i",{staticClass:"fas fa-plus"}),t._v(" Add New Product")]),t._v(" "),e("h4",{directives:[{name:"show",rawName:"v-show",value:t.editmode,expression:"editmode"}],staticClass:"modal-title"},[e("i",{staticClass:"fas fa-plus"}),t._v(" Update this Product")]),t._v(" "),t._m(7)]),t._v(" "),e("form",{on:{submit:function(a){a.preventDefault(),t.editmode?t.updateProduct():t.createProduct()}}},[e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Title")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("title")},attrs:{type:"text",name:"title"},domProps:{value:t.form.title},on:{input:function(a){a.target.composing||t.$set(t.form,"title",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"title"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputDescription"}},[t._v("Product Description")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"description form-control",class:{"is-invalid":t.form.errors.has("description")},staticStyle:{width:"100%",height:"200px","font-size":"14px","line-height":"18px",border:"1px solid #dddddd",padding:"10px"},attrs:{name:"description",id:"textarea",placeholder:"Place some text here"},domProps:{value:t.form.description},on:{input:function(a){a.target.composing||t.$set(t.form,"description",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"description"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputStatus"}},[t._v("Status")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.status,expression:"form.status"}],staticClass:"custom-select form-control",class:{"is-invalid":t.form.errors.has("status")},attrs:{name:"status"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"status",a.target.multiple?e:e[0])}}},[e("option",{attrs:{selected:"",disabled:""}},[t._v("Select one")]),t._v(" "),e("option",{attrs:{value:"1"}},[t._v("Enabled")]),t._v(" "),e("option",{attrs:{value:"0"}},[t._v("Disabled")])]),t._v(" "),e("has-error",{attrs:{form:t.form,field:"status"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputClientCompany"}},[t._v("Price")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.price,expression:"form.price"}],staticClass:" form-control",class:{"is-invalid":t.form.errors.has("price")},attrs:{type:"number",id:"inputClientCompany",name:"price"},domProps:{value:t.form.price},on:{input:function(a){a.target.composing||t.$set(t.form,"price",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"price"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputProjectLeader"}},[t._v("Tags")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tags,expression:"form.tags"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("tags")},attrs:{type:"text",id:"inputProjectLeader",placeholder:"tags",name:"tags"},domProps:{value:t.form.tags},on:{input:function(a){a.target.composing||t.$set(t.form,"tags",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"tags"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputProjectLeader"}},[t._v("Category")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.cat_id,expression:"form.cat_id"}],staticClass:"custom-select form-control",class:{"is-invalid":t.form.errors.has("cat_id")},attrs:{name:"cat_id",placeholder:"Select one"},on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"cat_id",a.target.multiple?e:e[0])},t.changeSub]}},[e("option",{attrs:{selected:"",disabled:""}},[t._v("Select one")]),t._v(" "),t._l(t.categories.data,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v("\n                      "+t._s(a.name)+"\n                      ")])}))],2),t._v(" "),e("has-error",{attrs:{form:t.form,field:"cat_id"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputProjectLeader"}},[t._v("Sub Category")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.sub_id,expression:"form.sub_id"}],staticClass:"custom-select form-control",class:{"is-invalid":t.form.errors.has("sub_id")},attrs:{name:"sub_id",placeholder:"Select one"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"sub_id",a.target.multiple?e:e[0])}}},[e("option",{attrs:{selected:"",disabled:""}},[t._v("Select one")]),t._v(" "),t._l(t.subcats.data,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v("\n                      "+t._s(a.name)+"\n                      ")])}))],2),t._v(" "),e("has-error",{attrs:{form:t.form,field:"sub_id"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputProjectLeader"}},[t._v("Location")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.location,expression:"form.location"}],staticClass:"custom-select form-control",class:{"is-invalid":t.form.errors.has("location")},attrs:{name:"location",placeholder:"Select one"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"location",a.target.multiple?e:e[0])}}},[e("option",{attrs:{selected:"",disabled:""}},[t._v("Select one")]),t._v(" "),t._l(t.locations.data,(function(a){return e("option",{key:a.id,domProps:{value:a.name}},[t._v("\n                      "+t._s(a.name)+"\n                      ")])}))],2),t._v(" "),e("has-error",{attrs:{form:t.form,field:"location"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputClientCompany"}},[t._v("Main Image Product")]),t._v(" "),e("input",{staticClass:" form-control",class:{"is-invalid":t.form.errors.has("image")},attrs:{type:"file",id:"inputClientCompany",name:"image"},on:{change:t.uploadImage}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"image"}})],1)]),t._v(" "),e("div",{staticClass:"modal-footer justify-content-between"},[e("button",{staticClass:"btn  btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:!t.editmode,expression:"!editmode"}],staticClass:"btn btn-dark",attrs:{type:"submit"}},[e("i",{staticClass:"fas fa-plus"}),t._v(" Add new")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:t.editmode,expression:"editmode"}],staticClass:"btn btn-dark",attrs:{type:"submit"}},[e("i",{staticClass:"fas fa-plus"}),t._v("Update")])])])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"images"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[t._m(8),t._v(" "),e("div",{staticClass:"modal-body"},[e("form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(a){return a.preventDefault(),t.uploadFile()}}},[e("div",{staticClass:"form-group"},[e("label",[t._v("Upload Files")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{id:"upload-file",type:"file",multiple:""},on:{change:t.fieldChange}}),t._v(" "),e("input",{attrs:{type:"hidden",id:"proid"}})]),t._v(" "),t._m(9)]),t._v(" "),e("table",{staticClass:"table"},[t._m(10),t._v(" "),e("tbody",t._l(t.medias.data,(function(a){return e("tr",{key:a.id},[e("td",[e("img",{staticClass:"img-size-64",attrs:{src:"/uploads/product/"+a.image,alt:"Product Image"}})]),t._v(" "),e("td",{staticClass:"text-right py-0 align-middle"},[e("div",{staticClass:"btn-group btn-group-sm"},[e("a",{staticClass:"btn btn-info",attrs:{href:"/uploads/product/"+a.image,target:"_blank"}},[e("i",{staticClass:"fas fa-eye"})]),t._v(" "),e("a",{staticClass:"btn btn-danger",on:{click:function(e){return t.deleteImage(a.id)}}},[e("i",{staticClass:"fas fa-trash"})])])])])})),0)])]),t._v(" "),t._m(11)])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"content-header"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm-6"},[a("h1",{staticClass:"m-0 text-dark"},[a("i",{staticClass:"fa fa-tasks",attrs:{"aria-hidden":"true"}}),this._v(" Products")])])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"btn btn-dark",attrs:{type:"button","data-card-widget":"collapse"}},[a("i",{staticClass:"fas fa-minus"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"bg-dark"},[e("tr",[e("th",[t._v("Image")]),t._v(" "),e("th",[t._v("Title")]),t._v(" "),e("th",[t._v("Price")]),t._v(" "),e("th",[t._v("Status")]),t._v(" "),e("th",[t._v("Added At")]),t._v(" "),e("th",[t._v("Actions")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[a("i",{staticClass:"fas fa-plus"}),this._v(" Show Product ")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("a",{staticClass:"carousel-control-prev",attrs:{href:"#carouselExampleIndicators",role:"button","data-slide":"prev"}},[a("span",{staticClass:"carousel-control-prev-icon",attrs:{"aria-hidden":"true"}}),this._v(" "),a("span",{staticClass:"sr-only"},[this._v("Previous")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("a",{staticClass:"carousel-control-next",attrs:{href:"#carouselExampleIndicators",role:"button","data-slide":"next"}},[a("span",{staticClass:"carousel-control-next-icon",attrs:{"aria-hidden":"true"}}),this._v(" "),a("span",{staticClass:"sr-only"},[this._v("Next")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-footer justify-content-between"},[a("button",{staticClass:"btn  btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Close")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[a("i",{staticClass:"fas fa-plus"}),this._v(" Images (Add - Edit - Delete) ")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-dark",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-plus"}),this._v(" upload")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",{staticClass:"bg-dark"},[a("tr",[a("th",[this._v("Image")]),this._v(" "),a("th",[this._v("Actions")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-footer justify-content-between"},[a("button",{staticClass:"btn  btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Close")])])}],!1,null,null,null);a.default=o.exports}}]);
//# sourceMappingURL=17.js.map